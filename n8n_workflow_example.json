{
  "name": "WaveQ Audio Processing Workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "audio-edit",
        "options": {}
      },
      "id": "webhook-trigger",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300],
      "webhookId": "waveq-audio-edit"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.operation }}",
              "operation": "equals",
              "value2": "normalize"
            }
          ]
        }
      },
      "id": "check-operation",
      "name": "Check Operation Type",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "http://localhost:8002/api/audio/edit",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "audio_file",
              "value": "={{ $json.audio_file }}",
              "type": "file"
            },
            {
              "name": "operation",
              "value": "normalize",
              "type": "string"
            },
            {
              "name": "parameters",
              "value": "{\"target_db\": -18}",
              "type": "string"
            },
            {
              "name": "client_id",
              "value": "={{ $json.client_id || 'default' }}",
              "type": "string"
            },
            {
              "name": "priority",
              "value": "={{ $json.priority || 'normal' }}",
              "type": "string"
            },
            {
              "name": "description",
              "value": "× ×¨××•×œ ××•×“×™×• ××•×˜×•××˜×™",
              "type": "string"
            }
          ]
        }
      },
      "id": "normalize-audio",
      "name": "Normalize Audio",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [680, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "http://localhost:8002/api/audio/edit",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "audio_file",
              "value": "={{ $json.audio_file }}",
              "type": "file"
            },
            {
              "name": "operation",
              "value": "noise_reduction",
              "type": "string"
            },
            {
              "name": "parameters",
              "value": "{\"strength\": 0.2}",
              "type": "string"
            },
            {
              "name": "client_id",
              "value": "={{ $json.client_id || 'default' }}",
              "type": "string"
            },
            {
              "name": "priority",
              "value": "={{ $json.priority || 'normal' }}",
              "type": "string"
            },
            {
              "name": "description",
              "value": "×”×¤×—×ª×ª ×¨×¢×© ××•×˜×•××˜×™×ª",
              "type": "string"
            }
          ]
        }
      },
      "id": "noise-reduction",
      "name": "Noise Reduction",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [680, 400]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "http://localhost:8002/api/audio/status/{{ $json.request_id }}",
        "options": {}
      },
      "id": "check-status",
      "name": "Check Processing Status",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 300]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.status }}",
              "operation": "equals",
              "value2": "completed"
            }
          ]
        }
      },
      "id": "check-completion",
      "name": "Check if Completed",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1120, 300]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "http://localhost:8002/api/audio/download/{{ $json.request_id }}",
        "options": {}
      },
      "id": "download-result",
      "name": "Download Processed Audio",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1340, 200]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.status }}",
              "operation": "equals",
              "value2": "error"
            }
          ]
        }
      },
      "id": "handle-error",
      "name": "Handle Error",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1340, 400]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "https://hooks.slack.com/services/YOUR_SLACK_WEBHOOK",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "âŒ ×©×’×™××” ×‘×¢×™×‘×•×“ ××•×“×™×•: {{ $json.message }}",
              "type": "string"
            }
          ]
        }
      },
      "id": "slack-error",
      "name": "Send Slack Error",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1560, 400]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "https://hooks.slack.com/services/YOUR_SLACK_WEBHOOK",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "âœ… ×¢×™×‘×•×“ ××•×“×™×• ×”×•×©×œ× ×‘×”×¦×œ×—×”!\n\nğŸ“ ×§×•×‘×¥: {{ $json.output_path }}\nâ±ï¸  ×–××Ÿ ×¢×™×‘×•×“: {{ $json.processing_time }}\nğŸ‘¤ ×œ×§×•×—: {{ $json.client_id }}",
              "type": "string"
            }
          ]
        }
      },
      "id": "slack-success",
      "name": "Send Slack Success",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1560, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "{{ $json.client_telegram_id }}",
              "type": "string"
            },
            {
              "name": "text",
              "value": "ğŸµ ×”××•×“×™×• ×©×œ×š ××•×›×Ÿ ×œ×”×•×¨×“×”!\n\nğŸ”— ×§×™×©×•×¨: http://localhost:8002/api/audio/download/{{ $json.request_id }}\n\n×ª×•×“×” ×©×”×©×ª××©×ª ×‘×©×™×¨×•×ª WaveQ Audio!",
              "type": "string"
            }
          ]
        }
      },
      "id": "telegram-notification",
      "name": "Send Telegram Notification",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1780, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "http://localhost:8002/api/audio/edit",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "audio_file",
              "value": "={{ $json.output_path }}",
              "type": "file"
            },
            {
              "name": "operation",
              "value": "convert_format",
              "type": "string"
            },
            {
              "name": "parameters",
              "value": "{\"target_format\": \"mp3\", \"quality\": \"high\"}",
              "type": "string"
            },
            {
              "name": "client_id",
              "value": "={{ $json.client_id }}",
              "type": "string"
            },
            {
              "name": "priority",
              "value": "low",
              "type": "string"
            },
            {
              "name": "description",
              "value": "×”××¨×” ×œ-MP3 ×‘××™×›×•×ª ×’×‘×•×”×”",
              "type": "string"
            }
          ]
        }
      },
      "id": "convert-to-mp3",
      "name": "Convert to MP3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1780, 300]
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [
        [
          {
            "node": "Check Operation Type",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Operation Type": {
      "main": [
        [
          {
            "node": "Normalize Audio",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Noise Reduction",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Normalize Audio": {
      "main": [
        [
          {
            "node": "Check Processing Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Noise Reduction": {
      "main": [
        [
          {
            "node": "Check Processing Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Processing Status": {
      "main": [
        [
          {
            "node": "Check if Completed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check if Completed": {
      "main": [
        [
          {
            "node": "Download Processed Audio",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Handle Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Processed Audio": {
      "main": [
        [
          {
            "node": "Send Slack Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Handle Error": {
      "main": [
        [
          {
            "node": "Send Slack Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Slack Success": {
      "main": [
        [
          {
            "node": "Send Telegram Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Telegram Notification": {
      "main": [
        [
          {
            "node": "Convert to MP3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z",
      "id": "waveq-audio",
      "name": "WaveQ Audio"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "1"
}
